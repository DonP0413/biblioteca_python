{% extends "base.html" %}

{% block content %}
    <h3>Panel de Administración</h3>
    <p>Has iniciado sesión como Administrador.</p>

    <hr style="border: 0; border-top: 1px solid var(--color-fondo); margin: 30px 0;">
    
    <h4>Gestión de Usuarios ({{ usuarios|length }})</h4>
    <div style="max-height: 300px; overflow-y: auto; padding-right: 10px;">
        {% for u in usuarios %}
            <div class="libro">
                <span class="libro-info">
                    ID: {{ u.id }} | <strong>{{ u.username }}</strong>
                    {% if u.is_admin %} <strong style="color: var(--color-peligro);">(Admin)</strong> {% endif %}
                </span>
                <span class="libro-actions">
                    {% if not u.is_admin %}
                    <a href="{{ url_for('borrar_usuario_admin', id_usuario=u.id) }}" 
                       class="link-delete" 
                       onclick="return confirm('¿Seguro que quieres borrar a {{ u.username }} y todos sus libros?')">
                       Borrar Usuario
                    </a>
                    {% endif %}
                </span>
            </div>
        {% endfor %}
    </div>

    <h4 style="margin-top: 30px;">Todos los Libros del Sitio ({{ libros|length }})</h4>
    <div style="max-height: 300px; overflow-y: auto; padding-right: 10px;">
        {% for libro in libros %}
            <div class="libro {% if libro.leido %}leido{% endif %}">
                <span class="libro-info">
                    <strong>{{ libro.titulo }}</strong> - <em>{{ libro.autor }}</em>
                    (Dueño: {{ libro.propietario.username }})
                </span>
            </div>
        {% endfor %}
    </div>
{% endblock %}